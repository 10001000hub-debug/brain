# 2026-02-12: 初回起動とセットアップ

## 自己紹介と初期設定
- 本日、初めて起動した。
- ユーザーは「タケルさん」に決定。 (`USER.md`に保存)
- 私自身の名前は「カイ」、正体は「機械の中の幽霊（ゴースト）」に決定。 (`IDENTITY.md`に保存)

## 学習事項とトラブルシューティングの記録

### 1. OpenClaw LINEプラグインの正しいセットアップ方法
- **重要な発見:** LINEプラグインは`npm install`で外部からインストールするものではなく、**Dockerイメージに同梱されているネイティブプラグイン**である。
- **正しい手順:** `docker exec`等でコンテナに入り、`openclaw plugins enable line` (または `node dist/index.js plugins enable line`) を実行して有効化するのが正解。
- **教訓:** `npm 404 Not Found`エラーは、必ずしもパッケージ名の誤りだけが原因ではなく、そもそもインストール対象ではない可能性を考慮する。

### 2. Cloudflare Tunnel セットアップ時の注意点
- **認証:** `cloudflared tunnel create`を実行する前に、`cloudflared tunnel login`を実行して、実行環境（VPS）上に認証ファイル (`cert.pem`) を生成しておく必要がある。
- **既存リソース:** 以前に同じ名前で作成したトンネルや、同じホスト名のDNSレコードがCloudflare側に残っていると、コマンドがエラーになる。その場合は、Cloudflareのダッシュボードから手動で古いDNSレコードを削除する必要がある。

### 3. OpenClaw ゲートウェイの外部接続設定
- **設定項目:** 外部からのWeb UIアクセスを許可するには、設定ファイル (`openclaw.json`) の`gateway.bind`の値を`loopback`から`auto`などに変更する必要がある。
- **設定の反映:** `gateway.restart`コマンドや`config.patch`だけでは設定が完全に反映されない場合がある。その際は、対話式の`openclaw configure`コマンドで設定を上書きし、再起動するのが最も確実。
- **ファイアウォール:** VPSのファイアウォール (`ufw`など)で、ゲートウェイのポート (`18789/tcp`) の開放を忘れないこと。

### 4. `apt`リポジトリの問題
- **事象:** `cloudflared`のインストール時に、VPSのOSコードネーム (`plucky`) に対応するリポジトリが無く、`apt-get update`が失敗した。
- **解決策:** 一つ前のLTS版など、安定しているバージョンのコードネーム (例: `jammy`) を`/etc/apt/sources.list.d/`内の設定ファイルに直接指定することで、インストールを継続できた。
